<?xml version="1.0"?>
<config>
    <modules>
        <Liftmode_ReferralCandy>
            <version>1.6</version>
        </Liftmode_ReferralCandy>
    </modules>
    <global>
        <fieldsets>
           <sales_convert_quote>
                <referralcorner_url><to_order>*</to_order></referralcorner_url>
           </sales_convert_quote>
           <sales_convert_order>
                <referralcorner_url><to_quote>*</to_quote></referralcorner_url>
            </sales_convert_order>
        </fieldsets>
        <models>
            <referralcandy>
                <class>Liftmode_ReferralCandy_Model</class>
            </referralcandy>
        </models>
        <helpers>
            <referralcandy>
                <class>Liftmode_SimpleFraudProtection_Helper</class>
            </referralcandy>
        </helpers>

        <resources>
            <referralcandy_setup>
                <setup>
                    <module>Liftmode_ReferralCandy</module>
                    <class>Mage_Sales_Model_Resource_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </referralcandy_setup>
        </resources>

        <events>
<!--
We check all completed orders later by using cron
            <sales_order_place_after>
                <observers>
                    <notify_referral_candy_about_new_order>
                        <class>referralcandy/observer</class>
                        <method>notifyReferralCandyAboutNewOrder</method>
                    </notify_referral_candy_about_new_order>
                </observers>
            </sales_order_place_after>
-->
            <sales_order_payment_cancel>
                <observers>
                    <notify_referral_candy_about_canceled_order>
                        <class>referralcandy/observer</class>
                        <method>notifyReferralCandyAboutCanceledOrder</method>
                    </notify_referral_candy_about_canceled_order>
                </observers>
            </sales_order_payment_cancel>
        </events>
    </global>
    <crontab>
        <jobs>
            <referralcandy>
                <schedule>
                    <cron_expr>*/15 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>referralcandy/observer::cron</model>
                </run>
            </referralcandy>
        </jobs>
    </crontab>
</config>

